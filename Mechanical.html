<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GATE SCORE</title>
    <!-- Tailwind CSS for Styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617; /* slate-950 */
            overscroll-behavior-y: contain;
        }
        /* Custom scrollbar for a premium look */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        
        // --- Lucide Icon Wrapper Component ---
        const Icon = ({ name, size = 24, className = "" }) => {
            const [iconSvg, setIconSvg] = useState("");
            useEffect(() => {
                if (window.lucide) {
                    const icon = window.lucide.icons[name];
                    if (icon) {
                        // Generate SVG from lucide icons
                        const svg = icon.toSvg({
                            width: size,
                            height: size,
                            class: className,
                            'stroke-width': 2
                        });
                        setIconSvg(svg);
                    }
                }
            }, [name, size, className]);
            return <span dangerouslySetInnerHTML={{ __html: iconSvg }} />;
        };

        // --- Mock Data ---
        const SUBJECTS = [
            { id: 'thermo', name: 'Thermodynamics', icon: 'Flame', total: 45, color: 'bg-orange-500' },
            { id: 'som', name: 'Strength of Materials', icon: 'Construction', total: 38, color: 'bg-blue-500' },
            { id: 'tom', name: 'Theory of Machines', icon: 'Settings', total: 32, color: 'bg-purple-500' },
            { id: 'fm', name: 'Fluid Mechanics', icon: 'Droplets', total: 40, color: 'bg-cyan-500' },
            { id: 'math', name: 'Eng. Mathematics', icon: 'Ruler', total: 50, color: 'bg-emerald-500' },
            { id: 'mfg', name: 'Manufacturing', icon: 'Factory', total: 55, color: 'bg-amber-600' },
        ];

        const QUESTIONS_DATA = {
            thermo: [
                {
                    id: 1,
                    text: "A heat engine receives 1000 kJ of heat from a source at 1000 K and rejects heat to a sink at 300 K. If the engine produces 600 kJ of work, the efficiency and the nature of the engine are:",
                    options: ["60%, Reversible", "60%, Irreversible", "70%, Reversible", "70%, Impossible"],
                    correct: 1,
                    explanation: "Efficiency = W/Q = 600/1000 = 0.6 (60%). Carnot Efficiency = 1 - (300/1000) = 0.7 (70%). Since η < η_carnot, it is irreversible."
                },
                {
                    id: 2,
                    text: "The entropy of an isolated system can never decrease. This is a statement of:",
                    options: ["First law", "Second law", "Third law", "Zeroth law"],
                    correct: 1,
                    explanation: "The principle of increase of entropy for an isolated system is a direct consequence of the Second Law."
                }
            ],
            som: [
                {
                    id: 3,
                    text: "A cantilever beam of length L is subjected to a point load P at the free end. The maximum deflection is:",
                    options: ["PL³/3EI", "PL³/48EI", "PL³/8EI", "5PL³/384EI"],
                    correct: 0,
                    explanation: "Standard formula for cantilever with end load: δ = PL³ / 3EI."
                }
            ]
        };

        // --- UI Components ---
        const VirtualCalculator = ({ isOpen, onClose }) => {
            const [display, setDisplay] = useState('0');
            if (!isOpen) return null;
            const buttons = ['7', '8', '9', '/', 'sin', '4', '5', '6', '*', 'cos', '1', '2', '3', '-', 'tan', '0', '.', '=', '+', 'C'];
            const calculate = (expr) => {
                try {
                    let processedExpr = expr.replace(/sin\(/g, 'Math.sin(').replace(/cos\(/g, 'Math.cos(').replace(/tan\(/g, 'Math.tan(');
                    const result = new Function(`return (${processedExpr})`)();
                    return Number.isFinite(result) ? parseFloat(result.toFixed(4)).toString() : 'Error';
                } catch { return 'Error'; }
            };
            return (
                <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-[100] p-4 backdrop-blur-sm">
                    <div className="bg-slate-900 rounded-2xl w-full max-w-[320px] p-5 border border-slate-700 shadow-2xl">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-white font-bold flex items-center gap-2"><Icon name="Calculator" size={18} className="text-blue-400"/> Calc</h3>
                            <button onClick={onClose} className="text-slate-400 hover:text-white">✕</button>
                        </div>
                        <div className="bg-slate-950 p-4 rounded-lg mb-4 text-right border border-slate-800">
                            <div className="text-white text-2xl font-mono truncate">{display}</div>
                        </div>
                        <div className="grid grid-cols-5 gap-2">
                            {buttons.map(btn => (
                                <button key={btn} onClick={() => {
                                    if(btn === 'C') setDisplay('0');
                                    else if(btn === '=') setDisplay(prev => calculate(prev));
                                    else setDisplay(prev => prev === '0' ? btn : prev + btn);
                                }} className="p-3 bg-slate-800 rounded-lg text-white hover:bg-slate-700 active:scale-95">{btn}</button>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        function App() {
            const [view, setView] = useState('dashboard');
            const [selectedSub, setSelectedSub] = useState(null);
            const [currentIdx, setCurrentIdx] = useState(0);
            const [answers, setAnswers] = useState({});
            const [showExp, setShowExp] = useState(false);
            const [isCalcOpen, setIsCalcOpen] = useState(false);

            const startQuiz = (sub) => {
                setSelectedSub(sub);
                setCurrentIdx(0);
                setAnswers({});
                setShowExp(false);
                setView('practice');
            };

            return (
                <div className="min-h-screen">
                    <nav className="border-b border-slate-800 px-6 py-4 flex justify-between items-center bg-slate-950/50 backdrop-blur-md sticky top-0 z-50">
                        <div className="flex items-center gap-2">
                            <div className="bg-blue-600 p-1.5 rounded-lg"><Icon name="Zap" size={20} className="text-white"/></div>
                            <span className="text-xl font-bold text-white tracking-tighter">GATE<span className="text-blue-500">MASTER</span></span>
                        </div>
                        <div className="flex gap-4">
                            <button onClick={() => setIsCalcOpen(true)} className="p-2 bg-slate-800 rounded-full text-blue-400 hover:bg-slate-700 transition-colors">
                                <Icon name="Calculator" size={20}/>
                            </button>
                        </div>
                    </nav>

                    <main className="max-w-7xl mx-auto px-6 py-10">
                        {view === 'dashboard' && (
                            <div className="animate-in fade-in duration-700">
                                <h1 className="text-4xl font-extrabold text-white mb-2">Ready to Ace GATE?</h1>
                                <p className="text-slate-400 mb-10 text-lg">Select a subject to start your focused practice session.</p>
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {SUBJECTS.map(sub => (
                                        <div key={sub.id} onClick={() => startQuiz(sub)} className="bg-slate-900/50 border border-slate-800 p-6 rounded-3xl hover:border-blue-500/50 transition-all cursor-pointer group">
                                            <div className={`${sub.color} w-12 h-12 rounded-2xl flex items-center justify-center text-white text-2xl mb-4 shadow-lg`}>
                                                <Icon name={sub.icon} size={24}/>
                                            </div>
                                            <h3 className="text-xl font-bold text-white mb-2">{sub.name}</h3>
                                            <div className="flex justify-between text-xs text-slate-500 font-bold uppercase tracking-wider mb-4">
                                                <span>{QUESTIONS_DATA[sub.id]?.length || 0} Questions</span>
                                                <span>82% Proficiency</span>
                                            </div>
                                            <div className="w-full bg-slate-800 h-1 rounded-full overflow-hidden">
                                                <div className="bg-blue-500 h-full w-[82%]"></div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {view === 'practice' && selectedSub && (
                            <div className="max-w-3xl mx-auto">
                                <div className="flex justify-between items-center mb-8">
                                    <button onClick={() => setView('dashboard')} className="text-slate-400 flex items-center gap-2 hover:text-white"><Icon name="ArrowLeft" size={20}/> Exit</button>
                                    <div className="text-blue-500 font-mono font-bold">Question {currentIdx + 1}/{QUESTIONS_DATA[selectedSub.id]?.length}</div>
                                </div>
                                <div className="bg-slate-900 border border-slate-800 rounded-3xl p-8 shadow-2xl">
                                    <p className="text-white text-xl mb-10 leading-relaxed">{QUESTIONS_DATA[selectedSub.id][currentIdx].text}</p>
                                    <div className="space-y-4">
                                        {QUESTIONS_DATA[selectedSub.id][currentIdx].options.map((opt, i) => (
                                            <button 
                                                key={i}
                                                disabled={showExp}
                                                onClick={() => { setAnswers({...answers, [currentIdx]: i}); setShowExp(true); }}
                                                className={`w-full text-left p-5 rounded-2xl border-2 transition-all ${
                                                    showExp 
                                                    ? (i === QUESTIONS_DATA[selectedSub.id][currentIdx].correct ? 'bg-emerald-500/10 border-emerald-500 text-emerald-400' : (answers[currentIdx] === i ? 'bg-red-500/10 border-red-500 text-red-400' : 'bg-slate-800/30 border-slate-800 text-slate-500'))
                                                    : 'bg-slate-800/50 border-slate-800 text-slate-300 hover:border-slate-600'
                                                }`}
                                            >
                                                {opt}
                                            </button>
                                        ))}
                                    </div>
                                    {showExp && (
                                        <div className="mt-10 p-6 bg-blue-500/5 border border-blue-500/20 rounded-2xl">
                                            <h4 className="text-blue-400 font-bold mb-2 flex items-center gap-2"><Icon name="Lightbulb" size={18}/> Explanation</h4>
                                            <p className="text-slate-400 text-sm">{QUESTIONS_DATA[selectedSub.id][currentIdx].explanation}</p>
                                            <button onClick={() => {
                                                if(currentIdx < QUESTIONS_DATA[selectedSub.id].length - 1) { setCurrentIdx(currentIdx+1); setShowExp(false); }
                                                else setView('dashboard');
                                            }} className="mt-6 w-full bg-blue-600 py-4 rounded-2xl text-white font-bold hover:bg-blue-500 transition-colors">
                                                {currentIdx < QUESTIONS_DATA[selectedSub.id].length - 1 ? 'Next Question' : 'Finish Session'}
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}
                    </main>

                    <VirtualCalculator isOpen={isCalcOpen} onClose={() => setIsCalcOpen(false)} />
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
